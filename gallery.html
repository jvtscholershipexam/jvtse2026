<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Gallery | 2026 Jai Veer Tejaji Club</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body{
      margin:0;
      padding:0;
      background:radial-gradient(circle at top,#0b4d2b,#032015);
      font-family:Arial, sans-serif;
      color:#fff;
      text-align:center;
    }

    h2{
      margin-top:20px;
      color:#ffd65a;
      font-size:22px;
    }

    .subtitle{
      font-size:14px;
      margin-bottom:15px;
      color:#ffecb3;
    }

    #gallery{
      width:90%;
      margin:0 auto 30px auto;
      display:flex;
      flex-wrap:wrap;
      justify-content:center;
    }

    .photo-card{
      background:rgba(0,0,0,0.6);
      border-radius:12px;
      margin:10px;
      padding:10px;
      width:220px;
      box-shadow:0 0 8px rgba(0,0,0,0.6);
      border:1px solid rgba(212,175,55,0.6);
    }

    .photo-card img{
      width:200px;
      height:200px;
      object-fit:cover;
      border-radius:8px;
      display:block;
      margin:0 auto;
      background:#000;
    }

    .caption{
      margin-top:8px;
      font-size:14px;
      color:#ffe08a;
    }

    #status{
      margin-top:15px;
      font-size:14px;
      color:#ffd65a;
    }

    footer{
      font-size:12px;
      padding:10px;
      background:#000c;
      color:#ddd;
    }
  </style>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.48.0/dist/umd/supabase.min.js"></script>
</head>
<body>

  <h2>ðŸ“¸ 2026 Jai Veer Tejaji Club â€“ Gallery</h2>
  <div class="subtitle">
    Scholarship exam & events ki real photos ðŸ‘‡
  </div>

  <div id="status">Loading photos...</div>
  <div id="gallery"></div>

  <footer>Â© 2026 Jai Veer Tejaji Club</footer>

  <script>
    /* ðŸ”— Supabase (NEW) */
    const SUPABASE_URL = "https://iqcbgiwycbuyvxpegmfg.supabase.co";
    const SUPABASE_ANON_KEY = "sb_publishable_BCvr1Fx0v1JgAWVE90ittw_bThpVl8C";

    const supabase = window.supabase.createClient(
      SUPABASE_URL,
      SUPABASE_ANON_KEY
    );

    const statusEl  = document.getElementById("status");
    const galleryEl = document.getElementById("gallery");

    async function loadGallery(){
      statusEl.textContent = "Loading photos...";

      const { data, error } = await supabase
        .from("gallery_items")
        .select("*")
        .eq("visible", true)
        .order("created_at", { ascending:false });

      if(error){
        console.error(error);
        statusEl.textContent = "Gallery load nahi ho rahi. Thodi der baad try karein.";
        return;
      }

      galleryEl.innerHTML = "";

      if(!data || data.length === 0){
        statusEl.textContent = "Abhi koi photo available nahi hai.";
        return;
      }

      statusEl.textContent = "";

      data.forEach(item=>{
        const card = document.createElement("div");
        card.className = "photo-card";

        card.innerHTML = `
          <img src="${item.public_url || ""}" alt="Gallery Image">
          <div class="caption">${item.caption || ""}</div>
        `;

        galleryEl.appendChild(card);
      });
    }

    loadGallery();
  </script>

</body>
</html>
